# Proxy Settings Monitor for Windows
## 1. Вступ
Програма виконує моніторінг налаштувань **Proxy**. Програма використвує наступні бібліотеки:
- **golang.org/x/sys/windows** (cтворення локальних *Events*, іменованих *Mutex*, *Events*, завантаження *DLL*, робота з ресурсами
- **golang.org/x/sys/windows/registry** для спостереження за змінами реєстру для *HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings*)
- **github.com/getlantern/systray** (Створення та керування *Windows Tray Icon*)
Системні інструменти:
- MSYS2 (https://www.msys2.org/) з встановленними minGW-w64, та minGW-w64-x86_64-make. Шлях до бінарних файлів minGW64 (наприклад, ***C:\msys64\mingw64\bin***)повинен бути доданий до змінної середовища PATH. MinGW64 використовується для компіляції файлів ресурсів *.rc в файли *.syso, для створення ресурсних .dll (тека Debug) та виконання make.

Під час кожного старту моніторінгу - програма записує поточні дані в журнал (%APPDATA%/appname/appname.log), потім під час кожної зміни параметрів - доповнює його новими записами.

## 2. Шаблон проекту

-monitor
    L assets
        L <name>
            L <some resource files>
            L resources.rc
        ...
    L cmd
        L <name>
            L main.go
            L [resources.syso] - створюється скриптами
        ...
    L debug
        L <name>+"Res".dll - файл для використання під час режиму DEBUG окремою одиницею проекту
    L internal
        L <package>
            L <go-files>
        ...
    L scripts
        L common
            L rebuildOne.bat
            L resOne.bat
        L  

## 2. Створення .exe файлу

Файл для запуску застосунку має локальний шлях "bin/proxyMon.exe"
Для його створення, можна виконати одну з наступних дій у головній теці проекту:

1) з консолі cmd/powershell (якщо make встановлено), або з консолі системи Linux (див. WSL):
```
make all 
```
2) запустити з консолі cmd/powershell:
```
scripts\rebuild 
```

При цьому буде створена локальная тека **bin** (якщо її не було) з оновленим файлом ***proxyMon.exe***

Запуск програми може мати параметри (відповідно завданню: -start, -stop, -quit)
Перший запуск програми (без -quit), вважається головною програмою. Всі інші запуски - тільки керують головною програмою. 

Програму можна запустити за допомогою **GO**
```
go run cmd/app/main.go <params>
```
В такому випадку можна спостерігати сповіщення в консолі

## 3. Примітки

1) В даному проекті відсутні тести.
2) Файл журналу збережено як вказано в завданні: %APPDATA%/appname/appname.log, тобто не %APPDATA%/proxyMon/proxyMon.log
3) Оскільки в завданні нічого не сказано про запис зміни статусу монітору, коли виконується start - відразу створюється запис у журналі, незалежно від того, змінювався він чи ні (ми не знаємо про можливі зміни proxy за час відсутності або простою монітору)

